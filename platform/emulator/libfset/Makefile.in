#  Authors:
#    Michael Mehl (mehl@dfki.de)
#
#  Contributors:
#    optional, Contributor's name (Contributor's email address)
#
#  Copyright:
#    Michael Mehl (mehl@dfki.de)
#
#  Last change:
#    $Date$ by $Author$
#    $Revision$
#
#  This file is part of Mozart, an implementation
#  of Oz 3:
#     $MOZARTURL$
#
#  See the file "LICENSE" or
#     $LICENSEURL$
#  for information on usage and redistribution
#  of this file, and for a DISCLAIMER OF ALL
#  WARRANTIES.

include ../Makefile.vars

BUILDTOP        = @BUILDTOP@
VPATH           = @srcdir@
FSETDIR         = @srcdir@
INCS            = -I. -I$(FSETDIR)/.. -I..
FSETTARGETS     = @FSETTARGETS@

FSETLIBSRCS =   standard.cc telling.cc \
                testing.cc fsaux.cc \
                intsets.cc monitor.cc \
                reified.cc fsstd.cc \
                std_n.cc table.cc

FSETLIBOBJS = $(FSETLIBSRCS:.cc=.o)

all: $(FSETTARGETS)

.PHONY: libfset.a libfset.so

../libfset.so: $(FSETLIBOBJS)
        $(DYNLD) -o $@ $(FSETLIBOBJS)

../libfset.a: $(FSETLIBOBJS)
        $(AR) -rc $@ $(FSETLIBOBJS) && $(RANLIB) $@

install:: @FSETINSTALL@

install-fset:
        $(INSTALL_BIN) $(FSETTARGETS) $(BINDIR)

depend:: Makefile $(FSETLIBSRCS)
        $(DEPEND) $(FSETLIBSRCS:%=$(FSETDIR)/%) > Makefile.deps

-include Makefile.deps

veryclean::
        -rm -f *.a *.so

include ../Makefile.rules

distclean::
        -rm -f Makefile
