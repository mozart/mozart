<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>8.4 Image libraries</TITLE><LINK href="ozdoc.css" rel="stylesheet" type="text/css"></HEAD><BODY><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node37.html#misc.image">&lt;&lt; Prev</A></TD><TD><A href="node34.html">- Up -</A></TD><TD><A href="node39.html#misc.distance">Next &gt;&gt;</A></TD></TR></TABLE><DIV id="misc.imagelibrary"><H2><A name="misc.imagelibrary">8.4 Image libraries</A></H2><P>When an application uses several bitmaps or photos, it is useful to group all these images into a single file called an image library. Image libraries can be saved to files and loaded later, restoring all images that were stored inside the library. Moreover image libraries files are functors that can be linked to your application so that graphical resources like images can be packaged inside your application binaries.</P><P>The function <CODE>QTk<SPAN class="keyword">.</SPAN>newImageLibrary</CODE> returns an empty image library. An image library is an object that implements the following interface: </P><UL><LI><P><CODE>newPhoto(<SPAN class="keyword">...</SPAN>)</CODE>: Adds a photo to the image library. All the parameters are the same as the ones for <CODE>QTk<SPAN class="keyword">.</SPAN>newImage&nbsp;photo(<SPAN class="keyword">...</SPAN>)</CODE>, except a supplementary one: <CODE>name:A</CODE> that defines the image's name inside the image library. If not specified, a name is determined by the file name or url, or an error is raised if no name could be determined. <CODE>A</CODE> must be an atom. </P></LI><LI><P><CODE>newBitmap(<SPAN class="keyword">...</SPAN>)</CODE>: Adds a bitmap to the image library. All the parameters are the same as the ones for <CODE>QTk<SPAN class="keyword">.</SPAN>newImage&nbsp;bitmap(<SPAN class="keyword">...</SPAN>)</CODE>, except a supplementary one: <CODE>name:A</CODE> that defines the image's name inside the image library. If not specified, a name is determined by the file name or url, or an error is raised if no name could be determined. <CODE>A</CODE> must be an atom. </P></LI><LI><P><CODE>get(name:A&nbsp;image:V)</CODE>: Binds <CODE>V</CODE> to the image in the image library that has the name <CODE>A</CODE>. The returned image is similar the images built using then <CODE>QTk<SPAN class="keyword">.</SPAN>newImage</CODE> function. However, if you modify these images after they were created inside the image library, the image library won't be updated. You need to explicitly save and reload the modified image into the library. </P></LI><LI><P><CODE>getNames(V)</CODE>: Binds <CODE>V</CODE> to a list of atoms that are all the names of all available images in the library. </P></LI><LI><P><CODE>remove(name:A)</CODE>: Removes the image named <CODE>A</CODE> from the library if present, does nothing otherwise.</P></LI></UL><P> Image libraries can be also be saved and loaded to files: </P><UL><LI><P><CODE>{QTk<SPAN class="keyword">.</SPAN>saveImageLibrary&nbsp;L&nbsp;VS}</CODE>: This procedure saves the image library <CODE>L</CODE> to a file named <CODE>VS</CODE>. </P></LI><LI><P><CODE>{QTk<SPAN class="keyword">.</SPAN>loadImageLibrary&nbsp;VS}</CODE>: This function returns an image library loaded from the file <CODE>VS</CODE>.</P></LI></UL><P> Saved image libraries are functors that you can directly import and link into your application's functor. To achieve this, you must do the following: </P><UL><LI><P>Build an image library, place all needed images inside and save it to a file ending with <CODE><SPAN class="keyword">.</SPAN>ozf</CODE> and whose first letter is uppercase (for example <CODE>MyLib<SPAN class="keyword">.</SPAN>ozf</CODE>). </P></LI><LI><P>In your application's functor, you must <CODE><SPAN class="keyword">require</SPAN></CODE> the image library and <CODE><SPAN class="keyword">prepare</SPAN></CODE> the library by adding the following similar lines: </P><BLOCKQUOTE class="code"><CODE><SPAN class="keyword">require</SPAN>&nbsp;MyLib<BR><SPAN class="keyword">prepare</SPAN>&nbsp;BL=MyLib<SPAN class="keyword">.</SPAN>buildLibrary</CODE></BLOCKQUOTE><P> Note that the <CODE><SPAN class="keyword">require</SPAN></CODE> and <CODE><SPAN class="keyword">prepare</SPAN></CODE> part of functors are placed just before the <CODE><SPAN class="keyword">define</SPAN></CODE> part.</P></LI><LI><P>In your <CODE><SPAN class="keyword">define</SPAN></CODE> part, you must rebuild the image library by using a similar line: </P><BLOCKQUOTE class="code"><CODE>Lib={QTk<SPAN class="keyword">.</SPAN>buildImageLibrary&nbsp;BL}</CODE></BLOCKQUOTE><P></P></LI></UL><P> Compiling your functor now statically includes all the required data for rebuilding the image library, and all the necessary commands for creating a new one from this data. The original image library file is no more needed for the correct execution of your application. </P></DIV><TABLE align="center" border="0" cellpadding="6" cellspacing="6" class="nav"><TR bgcolor="#DDDDDD"><TD><A href="node37.html#misc.image">&lt;&lt; Prev</A></TD><TD><A href="node34.html">- Up -</A></TD><TD><A href="node39.html#misc.distance">Next &gt;&gt;</A></TD></TR></TABLE><HR><ADDRESS>Donatien Grolaux<BR><SPAN class="version">Version 1.2.3 (20020111)</SPAN></ADDRESS></BODY></HTML>
